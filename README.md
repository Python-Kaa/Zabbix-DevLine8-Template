# Zabbix DevLine 8 Template

## Описание
Шаблон Zabbix для наблюдения за сервером видеонаблюдения Линия 8 / DevLine 8.
Создавался на Zabbix 6.4, но должен работать и на более ранних версиях. Работает на основе HTTP-запросов с последующим разбором полученного JSON

### Собирает следующие параметры:
* Версия API сервера
* Статус лицензии (demo / коммерческая)
* Порты для подключения к серверу
* Имя сервера
* Используемая платформа (DVR / Linux)
* Версия ПО на сервере
* Список камер для LLD

### Для камер, обнаруженных через LLD собираются:
* Имя камеры, указанное на сервере (по умолчанию, отключено)
* Административный статус (включено / выключено)
* Поток 1
  * Административный статус (включено / выключено)
  * Текущий статус (есть / нет)
* Поток 2
  * Административный статус (включено / выключено)
  * Текущий статус (есть / нет)

### Триггеры обрауживают следующие ошибки:
* Пользователю запрещен доступ
* Пользователь не найден
* Изменилась версия сервера
* Не работают один или оба потока при административно включенной камере и потоках

### Макросы шаблона:
|Макрос|Значение по умолчанию|Описание|
|:-|:-:|:-|
|{$DEVLINE_API_VER}|45|Версия API, которая будет использоваться в запросах|
|{$DEVLINE_HTTP_PORT}|9786|Порт для HTTP-запросов|
|{$DEVLINE_LOGIN}|admin|Имя пользователя с правом Администрирование->Просмотр мониторинга|
|{$DEVLINE_PASSWORD}|<пусто>|Пароль пользователя|

## Возможные проблемы
Если Zabbix не может получить данные, проверьте, что SELinux на сервере/прокси пропускает наружу HTTP-запросы от пользователя Zabbix. Если остальные шаблоны / элементы, использующие HTTP-запросы работают корректно, проверьте доступность и номер порта подключения на сервере.
